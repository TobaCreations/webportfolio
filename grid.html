<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="">
</head>

<body>
    <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script>
        class Grid {
            constructor() {
                this.items = [];
                this.width = 4;
            }

            generateId() {
                let id = this.items.length;
                while (this.items.find(obj => {return obj.id === id})) {
                    id++;
                }
                return id;
            }

            newItem() {
                let item = new GridItem(this.generateId(), this)
                this.items.push(item);
                return item;
            }

            generateItems() {
                for (let i = 0; i < 32; i++) {
                    this.newItem();
                }
                return this.items;
            }

            generateGrid() {
                generateItems();
                chunkArray(this.grid, this.width);
                let acumulator = 0;
                for (let i = 0; i < this.height; i++) {
                    grid.push([])
                    for (let j = 0; j < width; j++) {
                        let item = newItem()
                        grid[i][j] = { id: acumulator, neighbors: getNeighbors([i, j]) };
                    }
                }
                console.log(grid);
            }

            /*d
            get items() {
                return this.items
            }
            */
        }

        const chunkArray = (arr, size) => {
            for(var chunks=[], i=0; i<arr.length; i+=size)
                chunks.push(arr.slice(i, size));
            return chunks;
        }

        class GridItem {
            constructor(id, context) {
                this.id = id;
                this.context = context;
            }

            set coords(coords) {
                this.coords = coords;
            }

            getNeighbors() {
                this.context.getNeighbors(this.coords);
            }
            
            /*get coords() {
                return this.coords;
            }*/
        }

        let grid = Array.from('x'.repeat(5))
        let hole = {}

        function getNeighbors(row, column) {
            let range = [[1, 0], [0, 1], [-1, 0], [0, -1]];
            let neighbors = []
            range.forEach(neighbor => {
                let [addRow, addColumn] = neighbor;
                let coords = [row + addRow, column + addColumn];
                console.log(coords);
                if (inGrid(coords)) neighbors.push(getGridItem(coords));
            });
            return neighbors;
        }

        let inGrid = (coords) => {
            let [row, column] = coords;
            if (row < 0 || column < 0) return false;
            return grid[row] ? (grid[row][column] ? true : false) : false;
        }

        let getGridItem = (coords) => {
            let [row, column] = coords;
            return grid[row][column];
        }

    </script>
</body>

</html>